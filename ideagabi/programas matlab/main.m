settings

% crear matrices y vectores
M
v

f=[zeros(N*R,1);ones(R*(R-1)/2,1)];
% intcon=1:N*R+R*(R-1)/2;

% x0=zeros(R,N);
% 
% x0(1,1)=1;x0(1,4)=1;x0(1,6)=1;x0(1,9)=1;x0(1,12)=1;x0(1,14)=1;x0(1,17)=1;x0(1,20)=1;x0(1,22)=1;x0(1,25)=1;x0(1,27)=1;
% x0(2,1)=1;x0(2,4)=1;x0(2,7)=1;x0(2,9)=1;x0(2,12)=1;x0(2,14)=1;x0(2,17)=1;x0(2,20)=1;x0(2,22)=1;x0(2,25)=1;x0(2,28)=1;
% x0(3,2)=1;x0(3,5)=1;x0(3,7)=1;x0(3,10)=1;x0(3,13)=1;x0(3,15)=1;x0(3,18)=1;x0(3,20)=1;x0(3,23)=1;x0(3,26)=1;x0(3,28)=1;
% x0(4,2)=1;x0(4,5)=1;x0(4,7)=1;x0(4,10)=1;x0(4,13)=1;x0(4,15)=1;x0(4,18)=1;x0(4,21)=1;x0(4,23)=1;x0(4,26)=1;x0(4,28)=1;
% x0(5,3)=1;x0(5,6)=1;x0(5,8)=1;x0(5,11)=1;x0(5,13)=1;x0(5,16)=1;x0(5,19)=1;x0(5,21)=1;x0(5,24)=1;x0(5,27)=1;
% x0(6,3)=1;x0(6,6)=1;x0(6,8)=1;x0(6,11)=1;x0(6,14)=1;x0(6,16)=1;x0(6,19)=1;x0(6,21)=1;x0(6,24)=1;x0(6,27)=1;
% 
% 
% 
% x0=reshape(x0',1,[]);
% x0=[x0,ones(1,R*(R-1)/2)];

opt = optimoptions('bintprog','MaxTime',10000,'TolXInteger',0.5);
% opt = optimoptions('bintprog','TolFun',R^2,'MaxTime',10000,'TolXInteger',0.1);

tic;
x = bintprog(f,Ades,bdes,Aeq,beq,[],opt);
toc

% for i=1:R*N
%     if x(i)<.5 
%         x(i)=0;
%     else
%         x(i)=1;
%     end
% end

x_sol=reshape(x(1:N*R),N,R)';
